<div class="reports-page">
    <h1>Reports & Analytics</h1>
    <p class="subtitle">Revenue and booking statistics</p>

    <!-- Revenue Report -->
    <div class="section">
        <h2>Revenue Report</h2>
        <div class="stats-grid revenue-stats" *ngIf="revenueReport">
            <div class="stat-card">
                <div class="stat-value">₹{{ revenueReport.totalRevenue | number:'1.0-0' }}</div>
                <div class="stat-label">Total Revenue</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ revenueReport.totalInvoices }}</div>
                <div class="stat-label">Total Invoices</div>
            </div>
        </div>
    </div>

    <!-- Booking Statistics -->
    <div class="section">
        <h2>Booking Statistics</h2>
        <div class="stats-grid" *ngIf="dashboardOverview">
            <div class="stat-card">
                <div class="stat-value">{{ dashboardOverview.totalBookings }}</div>
                <div class="stat-label">Total Bookings</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ dashboardOverview.pendingBookings }}</div>
                <div class="stat-label">Pending</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ dashboardOverview.assignedBookings }}</div>
                <div class="stat-label">Assigned</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ dashboardOverview.inProgressBookings }}</div>
                <div class="stat-label">In Progress</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ dashboardOverview.completedBookings }}</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ dashboardOverview.cancelledBookings }}</div>
                <div class="stat-label">Cancelled</div>
            </div>
            <div class="stat-card" *ngIf="dashboardOverview.avgRating">
                <div class="stat-value">⭐ {{ dashboardOverview.avgRating | number:'1.1-1' }}</div>
                <div class="stat-label">Average Rating</div>
            </div>
        </div>
    </div>

    <!-- Bookings by Category Bar Chart -->
    <div class="section" *ngIf="categoryBookings.length > 0">
        <h2>Bookings by Category</h2>
        <div class="chart-container">
            <div class="bar-chart">
                <div class="y-axis">
                    <span class="y-label" *ngFor="let tick of yAxisTicks">{{ tick }}</span>
                </div>
                <div class="bars-wrapper">
                    <div class="bars">
                        <div class="bar-item" *ngFor="let item of categoryBookings">
                            <div class="bar" [style.height.%]="getBarHeight(item.bookingCount)">
                                <span class="bar-value">{{ item.bookingCount }}</span>
                            </div>
                            <span class="bar-label" [title]="item.categoryName">{{ item.categoryName }}</span>
                        </div>
                    </div>
                    <div class="x-axis-line"></div>
                </div>
            </div>
            <div class="chart-legend">
                <span class="legend-item">
                    <span class="legend-color"></span>
                    Number of Bookings
                </span>
            </div>
        </div>
    </div>

    <!-- Top Services Table -->
    <div *ngIf="loading" class="loading-state">
        <p>Loading reports...</p>
    </div>
</div>